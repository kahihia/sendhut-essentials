{% extends "base.html" %}
{% load lunch_extras %}
{% load thumbnail %}

{% block page_header %}
Order History
{% endblock %}

{% block content %}
<br>
<table class="table table-striped">
  <thead>
    <tr>
      <th scope="col">Date</th>
      <th scope="col">Reference</th>
      <th scope="col">Delivery Time</th>
      <th scope="col">Delivery Address</th>
      <th scope="col">Total</th>
    </tr>
  </thead>
  <tbody>
    {% for order in orders %}
      <tr data-href="{% url 'lunch:order_details' order.reference %}">
        <td>
          {{ order.created }}
        </td>
        <td>{{ order.reference }}</td>
        <td>{{ order.delivery_time }}</td>
        <td>{{ order.delivery_address }}</td>
        <td>{{ order.total_cost }}</td>
      </tr>
    </a>
    {% endfor %}
  </tbody>
</table>

{% endblock %}

{% block extra_js %}
<script type="text/javascript">
    $('tr[data-href]').on("click",function(){
      window.location = $(this).data('href');
      return false;
    });
    $("td > a").on("click",function(e){
      e.stopPropagation();
    });
</script>
{% endblock %}
